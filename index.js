function _0x50b9(_0xeeae3c,_0x584b19){_0xeeae3c=_0xeeae3c-0x9c;const _0x591635=_0x5916();let _0x50b954=_0x591635[_0xeeae3c];return _0x50b954;}const _0x584020=_0x50b9;(function(_0x93cb78,_0x37b13a){const _0x2e18ee=_0x50b9,_0x108f72=_0x93cb78();while(!![]){try{const _0x4a05cf=parseInt(_0x2e18ee(0xd0))/0x1*(-parseInt(_0x2e18ee(0xe9))/0x2)+parseInt(_0x2e18ee(0xd6))/0x3+-parseInt(_0x2e18ee(0xb7))/0x4*(-parseInt(_0x2e18ee(0xf2))/0x5)+parseInt(_0x2e18ee(0xe2))/0x6+parseInt(_0x2e18ee(0x110))/0x7+-parseInt(_0x2e18ee(0xba))/0x8+parseInt(_0x2e18ee(0xb0))/0x9*(-parseInt(_0x2e18ee(0x107))/0xa);if(_0x4a05cf===_0x37b13a)break;else _0x108f72['push'](_0x108f72['shift']());}catch(_0x4f0a86){_0x108f72['push'](_0x108f72['shift']());}}}(_0x5916,0xa67e1));const os=require('os'),http=require(_0x584020(0x101)),fs=require('fs'),axios=require('axios'),net=require(_0x584020(0xb3)),path=require(_0x584020(0xd9)),crypto=require(_0x584020(0xc9)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x584020(0xd1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x584020(0x105)][_0x584020(0xa9)]||'9909ecbf-22d5-4d31-b603-ee45892f67ef',NEZHA_SERVER=process['env'][_0x584020(0xeb)]||'',NEZHA_PORT=process[_0x584020(0x105)][_0x584020(0xdc)]||'',NEZHA_KEY=process[_0x584020(0x105)][_0x584020(0xa7)]||'',DOMAIN=process['env']['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x584020(0x105)][_0x584020(0xbc)]||!![],WSPATH=process['env'][_0x584020(0xac)]||UUID[_0x584020(0x102)](0x0,0x8),SUB_PATH=process['env'][_0x584020(0xd8)]||_0x584020(0xc6),NAME=process['env'][_0x584020(0xce)]||'',PORT=process[_0x584020(0x105)][_0x584020(0x106)]||0x1eb4;function _0x5916(){const _0x4dcd3b=['npm','map','readUInt8','2053','setsid\x20nohup\x20./npm\x20-s\x20','2087','/bin/bash','4834459xIxcSl','https://api.ip.sb/geoip','--tls','index.html','application/json','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Not\x20Found\x0a','send','data','Server','length','concat','substr','trim','8443','listen','NEZHA_KEY','&path=%2F','UUID','\x20-p\x20','https://oooo.serv00.net/add-url','WSPATH','writeHead','connect','false','1809909bGaJTK','writeFileSync','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','net','find','Answer','npm\x20running\x20error:','4TFZiOX','8.8.4.4','hex','3919544RrkRnj','once','AUTO_ACCESS','error','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://amd64.ssss.nyc.mn/agent','client_secret:\x20','createServer','sha224','pipe',':443?encryption=none&security=tls&sni=','\x20with\x20all\x20DNS\x20servers','sub','Hello\x20world!','readUInt16BE','crypto','text/html','toString','log','2096','NAME','chmod\x20+x\x20npm','2245eVrICf','child_process','decode','text/plain','split','Failed\x20to\x20resolve\x20','1591884kJLsJp','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','SUB_PATH','path','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','write','NEZHA_PORT','get','country_code','pop','error:\x20','join','7328418oQZezx','vless://','&fp=chrome&type=ws&host=','base64','https://','1.1.1.1','https://arm64.ssss.nyc.mn/v1','126FpbDae','message','NEZHA_SERVER','stream','application/dns-json','https://dns.google/resolve?name=','unlink','config.yaml','connection','386345BNuaNS','finish','includes','arch','every','end','isp','update','arm64','npm\x20is\x20running','443','then','from','https://amd64.ssss.nyc.mn/v1','true','http','slice','reduce','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','env','PORT','60rfyIiG','post'];_0x5916=function(){return _0x4dcd3b;};return _0x5916();}let ISP='';const GetISP=async()=>{const _0x4cfbcb=_0x584020;try{const _0x4e7604=await axios[_0x4cfbcb(0xdd)](_0x4cfbcb(0x111)),_0x5e7d83=_0x4e7604[_0x4cfbcb(0x9f)];ISP=(_0x5e7d83[_0x4cfbcb(0xde)]+'-'+_0x5e7d83[_0x4cfbcb(0xf8)])['replace'](/ /g,'_');}catch(_0x41a7aa){ISP='Unknown';}};GetISP();const httpServer=http[_0x584020(0xc1)]((_0x5600c0,_0xe12ea2)=>{const _0x583688=_0x584020;if(_0x5600c0['url']==='/'){const _0x1c95a9=path[_0x583688(0xe1)](__dirname,_0x583688(0x113));fs['readFile'](_0x1c95a9,'utf8',(_0x17eef8,_0x24327d)=>{const _0x134f20=_0x583688;if(_0x17eef8){_0xe12ea2[_0x134f20(0xad)](0xc8,{'Content-Type':'text/html'}),_0xe12ea2[_0x134f20(0xf7)](_0x134f20(0xc7));return;}_0xe12ea2[_0x134f20(0xad)](0xc8,{'Content-Type':_0x134f20(0xca)}),_0xe12ea2['end'](_0x24327d);});return;}else{if(_0x5600c0['url']==='/'+SUB_PATH){const _0x51162c=NAME?NAME+'-'+ISP:ISP,_0x5a20e3=_0x583688(0xe3)+UUID+'@'+DOMAIN+_0x583688(0xc4)+DOMAIN+_0x583688(0xe4)+DOMAIN+_0x583688(0xa8)+WSPATH+'#'+_0x51162c,_0x13b49b='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x583688(0xe4)+DOMAIN+_0x583688(0xa8)+WSPATH+'#'+_0x51162c,_0x29afb1=_0x5a20e3+'\x0a'+_0x13b49b,_0x4170c1=Buffer[_0x583688(0xfe)](_0x29afb1)['toString'](_0x583688(0xe5));_0xe12ea2[_0x583688(0xad)](0xc8,{'Content-Type':_0x583688(0xd3)}),_0xe12ea2[_0x583688(0xf7)](_0x4170c1+'\x0a');}else _0xe12ea2[_0x583688(0xad)](0x194,{'Content-Type':_0x583688(0xd3)}),_0xe12ea2[_0x583688(0xf7)](_0x583688(0x9d));}}),wss=new WebSocket[(_0x584020(0xa0))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x584020(0xb8),_0x584020(0xe7)];function resolveHost(_0x2ee828){return new Promise((_0x1fdffd,_0x358361)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2ee828)){_0x1fdffd(_0x2ee828);return;}let _0x26bf74=0x0;function _0x582b9a(){const _0x310d34=_0x50b9;if(_0x26bf74>=DNS_SERVERS[_0x310d34(0xa1)]){_0x358361(new Error(_0x310d34(0xd5)+_0x2ee828+_0x310d34(0xc5)));return;}const _0x17501e=DNS_SERVERS[_0x26bf74];_0x26bf74++;const _0x36b6be=_0x310d34(0xee)+encodeURIComponent(_0x2ee828)+'&type=A';axios[_0x310d34(0xdd)](_0x36b6be,{'timeout':0x1388,'headers':{'Accept':_0x310d34(0xed)}})[_0x310d34(0xfd)](_0x4e2c5b=>{const _0x58d9ad=_0x310d34,_0x36eaa4=_0x4e2c5b[_0x58d9ad(0x9f)];if(_0x36eaa4['Status']===0x0&&_0x36eaa4[_0x58d9ad(0xb5)]&&_0x36eaa4[_0x58d9ad(0xb5)][_0x58d9ad(0xa1)]>0x0){const _0xb8d0c9=_0x36eaa4[_0x58d9ad(0xb5)][_0x58d9ad(0xb4)](_0xdd2490=>_0xdd2490['type']===0x1);if(_0xb8d0c9){_0x1fdffd(_0xb8d0c9['data']);return;}}_0x582b9a();})['catch'](_0x4ec64f=>{_0x582b9a();});}_0x582b9a();});}function handleVlessConnection(_0x2d18a0,_0x267cea){const _0x1b8bf6=_0x584020,[_0x181f5c]=_0x267cea,_0x5bed04=_0x267cea[_0x1b8bf6(0x102)](0x1,0x11);if(!_0x5bed04[_0x1b8bf6(0xf6)]((_0x2b4418,_0x4bfa91)=>_0x2b4418==parseInt(uuid['substr'](_0x4bfa91*0x2,0x2),0x10)))return![];let _0xe74251=_0x267cea['slice'](0x11,0x12)[_0x1b8bf6(0x10b)]()+0x13;const _0x1af548=_0x267cea[_0x1b8bf6(0x102)](_0xe74251,_0xe74251+=0x2)[_0x1b8bf6(0xc8)](0x0),_0x387636=_0x267cea[_0x1b8bf6(0x102)](_0xe74251,_0xe74251+=0x1)[_0x1b8bf6(0x10b)](),_0x1d85fc=_0x387636==0x1?_0x267cea['slice'](_0xe74251,_0xe74251+=0x4)[_0x1b8bf6(0xe1)]('.'):_0x387636==0x2?new TextDecoder()[_0x1b8bf6(0xd2)](_0x267cea[_0x1b8bf6(0x102)](_0xe74251+0x1,_0xe74251+=0x1+_0x267cea[_0x1b8bf6(0x102)](_0xe74251,_0xe74251+0x1)['readUInt8']())):_0x387636==0x3?_0x267cea[_0x1b8bf6(0x102)](_0xe74251,_0xe74251+=0x10)[_0x1b8bf6(0x103)]((_0x2fd7ba,_0x7b003e,_0xe46384,_0x269d22)=>_0xe46384%0x2?_0x2fd7ba[_0x1b8bf6(0xa2)](_0x269d22['slice'](_0xe46384-0x1,_0xe46384+0x1)):_0x2fd7ba,[])[_0x1b8bf6(0x10a)](_0x323408=>_0x323408[_0x1b8bf6(0xc8)](0x0)[_0x1b8bf6(0xcb)](0x10))['join'](':'):'';_0x2d18a0[_0x1b8bf6(0x9e)](new Uint8Array([_0x181f5c,0x0]));const _0x17e9a9=createWebSocketStream(_0x2d18a0);return resolveHost(_0x1d85fc)[_0x1b8bf6(0xfd)](_0x4f44cb=>{const _0x2983e7=_0x1b8bf6;net['connect']({'host':_0x4f44cb,'port':_0x1af548},function(){const _0x16cab6=_0x50b9;this['write'](_0x267cea[_0x16cab6(0x102)](_0xe74251)),_0x17e9a9['on'](_0x16cab6(0xbd),()=>{})[_0x16cab6(0xc3)](this)['on'](_0x16cab6(0xbd),()=>{})[_0x16cab6(0xc3)](_0x17e9a9);})['on'](_0x2983e7(0xbd),()=>{});})['catch'](_0x58bf34=>{const _0x3ac6bd=_0x1b8bf6;net[_0x3ac6bd(0xae)]({'host':_0x1d85fc,'port':_0x1af548},function(){const _0xecb17f=_0x3ac6bd;this[_0xecb17f(0xdb)](_0x267cea[_0xecb17f(0x102)](_0xe74251)),_0x17e9a9['on'](_0xecb17f(0xbd),()=>{})[_0xecb17f(0xc3)](this)['on'](_0xecb17f(0xbd),()=>{})[_0xecb17f(0xc3)](_0x17e9a9);})['on'](_0x3ac6bd(0xbd),()=>{});}),!![];}function handleTrojanConnection(_0x2954d1,_0x3fd927){const _0x3274e6=_0x584020;try{if(_0x3fd927[_0x3274e6(0xa1)]<0x3a)return![];const _0x1d44a6=_0x3fd927['slice'](0x0,0x38)[_0x3274e6(0xcb)](),_0x353f2d=[UUID];let _0x2bee57=null;for(const _0x2df6cc of _0x353f2d){const _0x1681df=crypto['createHash'](_0x3274e6(0xc2))[_0x3274e6(0xf9)](_0x2df6cc)['digest'](_0x3274e6(0xb9));if(_0x1681df===_0x1d44a6){_0x2bee57=_0x2df6cc;break;}}if(!_0x2bee57)return![];let _0x4848d3=0x38;_0x3fd927[_0x4848d3]===0xd&&_0x3fd927[_0x4848d3+0x1]===0xa&&(_0x4848d3+=0x2);const _0x27c691=_0x3fd927[_0x4848d3];if(_0x27c691!==0x1)return![];_0x4848d3+=0x1;const _0x59d958=_0x3fd927[_0x4848d3];_0x4848d3+=0x1;let _0x1b3e40,_0x4a82a6;if(_0x59d958===0x1)_0x1b3e40=_0x3fd927[_0x3274e6(0x102)](_0x4848d3,_0x4848d3+0x4)[_0x3274e6(0xe1)]('.'),_0x4848d3+=0x4;else{if(_0x59d958===0x3){const _0x1a6377=_0x3fd927[_0x4848d3];_0x4848d3+=0x1,_0x1b3e40=_0x3fd927[_0x3274e6(0x102)](_0x4848d3,_0x4848d3+_0x1a6377)[_0x3274e6(0xcb)](),_0x4848d3+=_0x1a6377;}else{if(_0x59d958===0x4)_0x1b3e40=_0x3fd927[_0x3274e6(0x102)](_0x4848d3,_0x4848d3+0x10)['reduce']((_0x40744b,_0x54e90a,_0x33659c,_0x4db7d1)=>_0x33659c%0x2?_0x40744b['concat'](_0x4db7d1[_0x3274e6(0x102)](_0x33659c-0x1,_0x33659c+0x1)):_0x40744b,[])[_0x3274e6(0x10a)](_0x5c95bc=>_0x5c95bc[_0x3274e6(0xc8)](0x0)[_0x3274e6(0xcb)](0x10))['join'](':'),_0x4848d3+=0x10;else return![];}}_0x4a82a6=_0x3fd927[_0x3274e6(0xc8)](_0x4848d3),_0x4848d3+=0x2;_0x4848d3<_0x3fd927['length']&&_0x3fd927[_0x4848d3]===0xd&&_0x3fd927[_0x4848d3+0x1]===0xa&&(_0x4848d3+=0x2);const _0x288122=createWebSocketStream(_0x2954d1);return resolveHost(_0x1b3e40)[_0x3274e6(0xfd)](_0x58edd9=>{const _0x28117f=_0x3274e6;net[_0x28117f(0xae)]({'host':_0x58edd9,'port':_0x4a82a6},function(){const _0x102d31=_0x28117f;_0x4848d3<_0x3fd927[_0x102d31(0xa1)]&&this[_0x102d31(0xdb)](_0x3fd927[_0x102d31(0x102)](_0x4848d3)),_0x288122['on'](_0x102d31(0xbd),()=>{})['pipe'](this)['on'](_0x102d31(0xbd),()=>{})[_0x102d31(0xc3)](_0x288122);})['on'](_0x28117f(0xbd),()=>{});})['catch'](_0x30f287=>{const _0x32ad5d=_0x3274e6;net[_0x32ad5d(0xae)]({'host':_0x1b3e40,'port':_0x4a82a6},function(){const _0x2446ee=_0x32ad5d;_0x4848d3<_0x3fd927[_0x2446ee(0xa1)]&&this[_0x2446ee(0xdb)](_0x3fd927['slice'](_0x4848d3)),_0x288122['on'](_0x2446ee(0xbd),()=>{})['pipe'](this)['on'](_0x2446ee(0xbd),()=>{})[_0x2446ee(0xc3)](_0x288122);})['on']('error',()=>{});}),!![];}catch(_0x3b805b){return![];}}wss['on'](_0x584020(0xf1),(_0x5eeb43,_0x3ba213)=>{const _0x97b451=_0x584020,_0xd843db=_0x3ba213['url']||'';_0x5eeb43[_0x97b451(0xbb)](_0x97b451(0xea),_0x27d515=>{const _0x442caf=_0x97b451;if(_0x27d515['length']>0x11&&_0x27d515[0x0]===0x0){const _0x204219=_0x27d515[_0x442caf(0x102)](0x1,0x11),_0x1a2653=_0x204219[_0x442caf(0xf6)]((_0x53bb35,_0x2e884e)=>_0x53bb35==parseInt(uuid[_0x442caf(0xa3)](_0x2e884e*0x2,0x2),0x10));if(_0x1a2653){!handleVlessConnection(_0x5eeb43,_0x27d515)&&_0x5eeb43['close']();return;}}!handleTrojanConnection(_0x5eeb43,_0x27d515)&&_0x5eeb43['close']();})['on'](_0x97b451(0xbd),()=>{});});const getDownloadUrl=()=>{const _0x54910b=_0x584020,_0x10ec0d=os[_0x54910b(0xf5)]();return _0x10ec0d===_0x54910b(0x115)||_0x10ec0d===_0x54910b(0xfa)||_0x10ec0d==='aarch64'?!NEZHA_PORT?_0x54910b(0xe8):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x54910b(0xff):_0x54910b(0xbf);},downloadFile=async()=>{const _0x4b9757=_0x584020;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x429ca3=getDownloadUrl(),_0x5df991=await axios({'method':_0x4b9757(0xdd),'url':_0x429ca3,'responseType':_0x4b9757(0xec)}),_0x2d0f5d=fs['createWriteStream'](_0x4b9757(0x109));return _0x5df991['data'][_0x4b9757(0xc3)](_0x2d0f5d),new Promise((_0x5b8ab6,_0x517ae2)=>{const _0x13c630=_0x4b9757;_0x2d0f5d['on'](_0x13c630(0xf3),()=>{const _0x383101=_0x13c630;console['log']('npm\x20download\x20successfully'),exec(_0x383101(0xcf),_0x3db0b6=>{if(_0x3db0b6)_0x517ae2(_0x3db0b6);_0x5b8ab6();});}),_0x2d0f5d['on'](_0x13c630(0xbd),_0x517ae2);});}catch(_0x2c1a17){throw _0x2c1a17;}},runnz=async()=>{const _0xd39025=_0x584020;try{const _0x22b0f5=execSync(_0xd39025(0xd7),{'encoding':'utf-8'});if(_0x22b0f5[_0xd39025(0xa4)]()!==''){console[_0xd39025(0xcc)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2fd803){}await downloadFile();let _0x305bb5='',_0xab26bc=[_0xd39025(0xfc),_0xd39025(0xa5),_0xd39025(0xcd),_0xd39025(0x10e),'2083',_0xd39025(0x10c)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3a8c25=_0xab26bc[_0xd39025(0xf4)](NEZHA_PORT)?_0xd39025(0x112):'';_0x305bb5=_0xd39025(0x10d)+NEZHA_SERVER+':'+NEZHA_PORT+_0xd39025(0xaa)+NEZHA_KEY+'\x20'+_0x3a8c25+_0xd39025(0x104);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xdab96=NEZHA_SERVER[_0xd39025(0xf4)](':')?NEZHA_SERVER[_0xd39025(0xd4)](':')[_0xd39025(0xdf)]():'',_0x482247=_0xab26bc['includes'](_0xdab96)?_0xd39025(0x100):_0xd39025(0xaf),_0x25f83a=_0xd39025(0xc0)+NEZHA_KEY+_0xd39025(0xda)+NEZHA_SERVER+_0xd39025(0xbe)+_0x482247+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0xd39025(0xb1)](_0xd39025(0xf0),_0x25f83a);}_0x305bb5=_0xd39025(0x9c);}else{console['log'](_0xd39025(0xb2));return;}}try{exec(_0x305bb5,{'shell':_0xd39025(0x10f)},_0x3bc4c0=>{const _0x3cc451=_0xd39025;if(_0x3bc4c0)console[_0x3cc451(0xbd)](_0x3cc451(0xb6),_0x3bc4c0);else console[_0x3cc451(0xcc)](_0x3cc451(0xfb));});}catch(_0x77cf2a){console[_0xd39025(0xbd)](_0xd39025(0xe0)+_0x77cf2a);}};async function addAccessTask(){const _0x1595f9=_0x584020;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x56235e=_0x1595f9(0xe6)+DOMAIN;try{const _0x328a60=await axios[_0x1595f9(0x108)](_0x1595f9(0xab),{'url':_0x56235e},{'headers':{'Content-Type':_0x1595f9(0x114)}});console[_0x1595f9(0xcc)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x17c34d){}}const delFiles=()=>{const _0x1e1b99=_0x584020;fs[_0x1e1b99(0xef)](_0x1e1b99(0x109),()=>{}),fs[_0x1e1b99(0xef)](_0x1e1b99(0xf0),()=>{});};httpServer[_0x584020(0xa6)](PORT,()=>{const _0x44e421=_0x584020;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x44e421(0xcc)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
